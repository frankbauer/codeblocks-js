<!DOCTYPE html>
<html lang="de">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <meta name="codeblocks-baseurl" content="<%= BASE_URL %>">
        <link rel="icon" href="<%= BASE_URL %>favicon.ico">
        <title>frontend</title>
        <link rel=stylesheet href="<%= BASE_URL %>css/loader.css">
        <link rel=stylesheet href="<%= BASE_URL %>css/roboto.css">
        <link rel=stylesheet href="<%= BASE_URL %>css/main.css">
        <script src="<%= BASE_URL %>js/jquery.min.js" type="text/javascript"></script>
        <style>
            codeblockseditor>*,
            codeblocks>*,
            [codeblockseditor]>*,
            [codeblocks]>* {
                display: none;
            }
        </style>
    </head>

    <body>
        <noscript>
            <strong>We're sorry but this doesn't work properly without JavaScript enabled. Please enable it to
                continue.</strong>
        </noscript>
        <div codeblockseditor data-compiler="python3" data-compiler-version="102" data-run-code="true"
            data-max-characters="10000000" data-execution-timeout="50000" data-message-passing=1
            data-persistent-arguments=1 data-keep-alive=0 data-dom-libs='["chart-3.3.0"]'>

            <block data-visible-lines="auto" data-expanded=1>print('[{"x":0,"y":0}, {"x":0.5,"y":0.25}, {"x":1,"y":1}, {"x":2,"y":4}, {"x":3,"y":9}]')
#print(sys.version)</block><script as="playground" type="application/javascript" data-expanded=1>
    exports = {
        runner: null,
        chart:undefined,
        init: function (canvasElement, outputElement, scope, runner) {
            const ctx = $(document.createElement('canvas'))
            ctx.width('100%')
            ctx.height('100%')
            
            canvasElement.append(ctx);
            
            // const myChart = new Chart(ctx, {
            //     type: 'bar',
            //     data: {
            //         datasets: [{                        
            //             label: '# of Stuff',
            //             data: [{x:'Red', y:12}, {x:'Blue', y:19}, {x:'Yellow', y:3}, {x:'Green', y:5}, {x:'Purple', y:2}, {x:'Orange', y:3} ],
            //             backgroundColor: [
            //                 'rgba(255, 99, 132, 0.2)',
            //                 'rgba(54, 162, 235, 0.2)',
            //                 'rgba(255, 206, 86, 0.2)',
            //                 'rgba(75, 192, 192, 0.2)',
            //                 'rgba(153, 102, 255, 0.2)',
            //                 'rgba(255, 159, 64, 0.2)'
            //             ],
            //             borderColor: [
            //                 'rgba(255, 99, 132, 1)',
            //                 'rgba(54, 162, 235, 1)',
            //                 'rgba(255, 206, 86, 1)',
            //                 'rgba(75, 192, 192, 1)',
            //                 'rgba(153, 102, 255, 1)',
            //                 'rgba(255, 159, 64, 1)'
            //             ],
            //             borderWidth: 1
            //         }]
            //     },
            //     options: {
            //         scales: {
            //             y: {
            //                 beginAtZero: true
            //             }
            //         }
            //     }
            // })
            this.chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{                        
                        label: '# of Stuff',
                        showLine:true,
                        data: [{x:0, y:12}, {x:1, y:19}, {x:2.5, y:3}, {x:3, y:5}, {x:3.5, y:2}, {x:4, y:3} ],                        
                        borderWidth: 1
                    }]
                },
                options: {
                    parsing: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            })
            

            this.runner = runner
            runner.postMessage('from-init', {})
        },
        addArgumentsTo(args) {
            args.test = 42;
        },
        reset(canvasElement) {},
        onMessage(cmd, data) {
            console.log("Message", cmd, data)
        },
        beforeStart() {
            console.log("Starting")
            setTimeout(() => {
                this.runner.postMessage('nonce', {})
            }, 2000)
        },
        whenFinished(args) {
            console.log("Finished", args)
        },
        update: function (txt, json, canvasElement, outputElement) {
                if (Array.isArray(json)){
                    this.chart.data.datasets[0].data = json
                    this.chart.update();
                }
        }
    }
                </script>
        </div>
        <div codeblockseditor data-compiler="javascript" data-compiler-version="101" data-run-code="true"
            data-max-characters="10000000" data-execution-timeout="50000" data-message-passing=1
            data-persistent-arguments=1 data-keep-alive=1>
            <loading>
                <div></div>
                <div></div>
            </loading>

            <block data-visible-lines="auto" data-expanded=0>import org.lgdv.*;

                public class One{
                public static void main(String[] args){
                System.out.println("START " + args[0]);
                args[0] = "Test";
                CodeBlocks.startReceivingEvents((CodeBlocksBaseMessage request) -> {
                System.out.println("Hello" + request.getCommand());

                CodeBlocks.postMessage("echo", request.getId());
                if (request.getCommand().equals("nonce")) {
                System.exit(0);
                }
                });
                int[] a = {1, 2, 3};
                System.out.println("ENDE" + a[0]);
                System.err.println("ERR");
                }
                }</block>

            <script as="playground" type="application/javascript">
exports = {
    runner: null,
    init: function (canvasElement, outputElement, scope, runner) {
        canvasElement.hide();
        this.runner = runner
        runner.postMessage('from-init', {})
    },
    addArgumentsTo(args) {
        console.log("Input State", args)
        args[0] = "Hello";
    },
    reset(canvasElement) {},
    onMessage(cmd, data) {
        console.log("Message", cmd, data)
    },
    beforeStart() {
        console.log("Starting")
        setTimeout(() => {
            this.runner.postMessage('nonce', {})
        }, 2000)
    },
    whenFinished(args) {
        console.log("Finished", args)
    },
    update: function (txt, json, canvasElement, outputElement) {

    }
}
            </script>
        </div>
        <div style="padding-left:50px;padding-right:50px">
            <div codeblockseditor data-compiler="javascript" data-compiler-version=102 data-run-code="true"
                data-max-characters="10000000" data-dom-libs='["phaser-3.54"]'>
                <loading>
                    <div></div>
                    <div></div>
                </loading>

                <block data-visible-lines="auto" data-expanded=0>
                    console.log("IN ARGS", args)
                    args.t = "Foo"
                    args.ct++
                    CodeBlocks.startReceivingEvents((request) => {
                    console.log("Hello", request.command);

                    CodeBlocks.postMessage("echo", request.id);
                    if (request.command == "nonce") {
                    System.exit(0);
                    }
                    });
                </block>

                <script as="playground" type="application/javascript">
exports = new IsometricMapGame(4, 3, 'resources/tile/checker.png', ['resources/sprite/figure_blue_big.png', 'resources/sprite/figure_blue.png'], '#fdfdfd', (game, manager, canvasElement, outputElement, scope, runner)=>{
    manager.onCreate = () => {
        manager.figures[0].moveToTile(2, 1)
        manager.figures[1].moveToTile(3, 2)
    }

    manager.onClick = (tile) => {
        manager.figures[0].walkToTile(tile.column, tile.row)
    }
})


                </script>


            </div>
        </div>



        </div>


        </div>
        <script>

        </script>
        <!-- built files will be auto injected -->

    </body>

</html>